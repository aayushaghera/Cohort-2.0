<!DOCTYPE html>
<html>
<body>

<div>
    <input type="text" id="title" placeholder="todo title">
    <br><br />
    <input type="text" id="description" placeholder="todo description">
    <br><br />

    <div id="container"></div>
</div>  

<script>
    function creatChild(title, description, id) {
        const child = document.createElement("div");

        const firstGrandParent = document.createElement("div");
        firstGrandParent.innerHTML = title;

        const SecondGrandParent = document.createElement("div");
        SecondGrandParent.innerHTML = description;

        const ThirdGrandParent = document.createElement("button");
        ThirdGrandParent.innerHTML = "Mark As Done";
        ThirdGrandParent.setAttribute("onclick", `markAsDone(${id})`);

        child.appendChild(firstGrandParent);
        child.appendChild(SecondGrandParent);
        child.appendChild(ThirdGrandParent);

        child.setAttribute("id", id);
        
        return child;
    }

    //state is always be an array
    //

    function updateDomAccToState(state) {
        const parent = document.getElementById("container");
        parent.innerHTML = ""; // Clear the container before adding new elements
        for (let i = 0; i < state.length; i++) {
            const child = creatChild(state[i].title, state[i].description, state[i].id);
            parent.appendChild(child);
        }
    }

    // Example state data to display
    updateDomAccToState([{
        title: "go to gym",
        description: "go to gym for 5-7",
        id: 1
    }, {
        title: "go to gym 2",
        description: "go to gym for 5-7",
        id: 2
    }]);
    
    window.setInterval(async function(){
        const response = await fetch("https://sum-server.100xdevs.com/todos")
        const json = await res.json();
        updateDomAccToState(json.todos)
    },5000)
    

</script>

</body>
</html>
